{{!--
  COMPARISON Template — A/B prompt experiment contract
--}}

# {{comparison.name}}

## Hypothesis
{{comparison.hypothesis}}

---

## Variants

### Variant A — {{comparison.variants.a.name}}
{{comparison.variants.a.description}}
{{#if comparison.variants.a.prompt}}

```text
{{comparison.variants.a.prompt}}
```
{{/if}}

### Variant B — {{comparison.variants.b.name}}
{{comparison.variants.b.description}}
{{#if comparison.variants.b.prompt}}

```text
{{comparison.variants.b.prompt}}
```
{{/if}}

---

## Evaluation Setup

{{#if comparison.test_cases}}
**Test Cases ({{comparison.test_cases.length}}):**
{{#each comparison.test_cases}}
- `{{this}}`
{{/each}}
{{else}}
**Test Cases:** use full suite
{{/if}}

### Judges

| Judge | Model | Focus |
|---|---|---|
{{#each comparison.judges}}
| {{name}} | `{{model}}` | {{focus}} |
{{/each}}

### Settings

| Setting | Value |
|---|---|
| Position swap | {{#if comparison.settings.position_swap}}enabled{{else}}disabled{{/if}} |
| Runs per case | {{default comparison.settings.num_runs 1}} |
| Confidence level | {{default comparison.settings.confidence_level 0.95}} |

---

## Execution Protocol

1. Run both variants on identical test inputs.
2. If position swap enabled, evaluate both A/B and B/A ordering.
3. Score with same judges and rubric.
4. Aggregate per-case and overall outcomes.
5. Compute significance before declaring winner.

---

## Result Contract

Produce final report with:

1. Win rate per variant
2. Mean score and variance
3. Significance signal (p-value or equivalent)
4. Per-dimension breakdown
5. Recommendation (accept/reject/inconclusive)

Significance method:
- Numeric score comparison: two-sided paired t-test (or bootstrap CI if non-normal)
- Binary win/loss outcomes: McNemar's test
- Report method used alongside p-value/confidence interval

Output format (default):
- Markdown with fixed headings:
  - `## Summary`
  - `## Metrics`
  - `## Significance`
  - `## Per-Dimension Breakdown`
  - `## Recommendation`

Suggested table skeleton:

| Metric | Variant A | Variant B |
|---|---:|---:|
| Win Rate | __ | __ |
| Mean Score | __ | __ |
| Std Dev | __ | __ |

---

{{#if comparison.notes}}
## Notes
{{comparison.notes}}
{{/if}}
