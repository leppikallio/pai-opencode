{{!--
  STRUCTURE Template — Workflow contract scaffold

  Goal:
  - Define phases with explicit purpose and expected outputs
  - Make execution order and completion gates unambiguous
  - Keep scope and reporting expectations explicit for GPT-5-style agents
--}}

# {{workflow.name}}

{{#if workflow.description}}
{{workflow.description}}
{{/if}}

{{#if workflow.timing}}
**Estimated Timing:** {{workflow.timing}}
{{/if}}

---

## Workflow Contract

{{#if workflow.goal}}
**Goal:** {{workflow.goal}}
{{/if}}

{{#if workflow.scope}}
**Scope:** {{workflow.scope}}
{{/if}}

{{#if workflow.non_goals}}
**Non-goals:**
{{#each workflow.non_goals}}
- {{this}}
{{/each}}
{{/if}}

{{#if workflow.reporting}}
**Reporting Rule:** {{workflow.reporting}}
{{else}}
**Reporting Rule:** Report milestones only; avoid narrating routine tool calls.
{{/if}}

---

## Phases

{{#each workflow.phases}}
### Phase {{@index}} — {{name}}

{{#if purpose}}
**Purpose:** {{purpose}}
{{/if}}

{{#if entry_criteria}}
**Entry Criteria:**
{{#each entry_criteria}}
- {{this}}
{{/each}}
{{/if}}

{{#each steps}}
#### Step {{@index}} — {{action}}

{{instructions}}

{{#if tools}}
**Tools:**
{{#each tools}}
- `{{this}}`
{{/each}}
{{/if}}

{{#if output}}
**Expected Output:** {{output}}
{{/if}}

{{#if verification}}
**Verification:** {{verification}}
{{/if}}

{{/each}}

{{#if exit_criteria}}
**Exit Criteria:**
{{#each exit_criteria}}
- [ ] {{this}}
{{/each}}
{{/if}}

---
{{/each}}

{{#if workflow.completion_criteria}}
## Completion Gate

All conditions must pass:
{{#each workflow.completion_criteria}}
- [ ] {{this}}
{{/each}}
{{/if}}

{{#if workflow.output_contract}}
## Output Contract

{{workflow.output_contract}}
{{else}}
## Output Contract

- Return a concise phase-by-phase summary
- Include evidence for each completed phase
- List unresolved risks and next actions
{{/if}}

{{#if workflow.notes}}
---

## Notes
{{workflow.notes}}
{{/if}}
